# RimWorld save game migrator

This script will migrate your RimWorld saves so that you can continue with them as you upgrade the game. For more on RimWorld, see the [official site](https://rimworldgame.com) or [/r/RimWorld](https://www.reddit.com/r/RimWorld/). It won't ever alter or overwrite your pre-existing saves.

### Supported versions

| Migration   | Support          | Era |
| ----------- | ------------------ | --- |
| `B18` to `1.0 unstable`   | ⚠️ Partial, in progress | June 2018 |
| `A17` to `B18`  | ✅ Built-in to RimWorld `B18` | October 2017 |
| `A16` to `A17` | ✅ Complete | June 2017 |
| `A15` to `A16`  | ✅ Complete | December 2016 |
| `A14` to `A15`  | ⚠️ [Manual guide](https://www.reddit.com/r/RimWorld/comments/4zrotj/guide_how_to_update_an_a14_save_to_a15/) | August 2016 |

### Requirements

The `migrate.py` script works on Windows, macOS and Linux, and requires Python `2.7`.
Python is pre-installed on macOS and Linux. On Windows, it is available as a [free download](https://www.python.org/downloads/). Make sure you get the `2.7` version, not the `3.x`.

There's a single dependancy that the scripts require: `lxml`.
To install `lxml`, you should run `pip install lxml` in your Command Prompt or Terminal.

## Getting started

The script can be run without any arguments, and will tell you how to proceed.

As in this example output, it will show [where your saves are located](http://rimworldwiki.com/wiki/Save_file) and summarise them:

```bash
$ python migrate.py
No argument provided; listing saves in /Users/Guest/Library/Application Support/RimWorld/Saves...

 * "a14_bogdan" (version: 0.14.1249 rev944, seed: bogdan (200, 150), playtime: 0:00:24, mods: Core)
 * "a15_bogdan" (version: 0.15.1284 rev141, seed: bogdan (200, 150), playtime: 0:00:23, mods: Core)
 * "a16_bogdan" (version: 0.16.1393 rev538, seed: bogdan (250, 1, 250), playtime: 0:00:26, mods: Core)
 * "a17_bogdan" (version: 0.17.1557 rev1154, seed: bogdan (250, 1, 250), playtime: 0:00:12, mods: Core)
 * "b18_bogdan" (version: 0.18.1722 rev1206, seed: bogdan (250, 1, 250), playtime: 0:00:06, mods: Core)
 * "u1_bogdan" (version: 1.0.1936 rev835, seed: bogdan (250, 1, 250), playtime: 0:01:26, mods: Core)

Run this script again with a path or save name to migrate it.
```

If you run it with the name of a save to migrate, or a path to a save, it will try to migrate it:

```bash
$ python migrate.py b18_bogdan
Examining save; it is version 0.18.1722 rev1206.
This save includes mods, which complicate migration. If migration does not complete, try re-saving your original game without mods.
Migrating to new save "b18_bogdan.1.0migration.rws"...
Migrated successfully to "b18_bogdan.1.0migration.rws", you should load and save this before migrating further. Good luck!
Report issues etc. to https://github.com/afit/rimworld-save-migrator.
```

### Caveats

#### `B18` to `1.0 unstable`

* Steel outcrops etc. are turned into squirrel meat.
* Workstations and other objects may be rotated 180.
* ~~Pawn limbs rearranged, crippling any with prosthetics.~~ *Fixed*
* ~~Various thoughts causing errors.~~ *Fixed*
* ~~Fox, bear, mech, wolf changes.~~ *Fixed*

The following seem like desired behaviour, and probably shouldn't be fixed:

* Windmills, component stations are destroyed (as they've grown bigger).
* Turrets immediately need repair.

#### `A16` to `A17`

* Some character backstories have been removed; they will be assigned random ones.
* Some material stacks will be trimmed to 75.

#### `A15` to `A16`

* Body types will all be set to male: [more details](http://pastebin.com/HNFFsMBC).
* You will be asked to name your settlement again.
* Legacy mood notices referencing characters will refer to them as "{0}", over time these will decay.

## Contributing improvements and reporting problems

Build and test status is currently:  [![CircleCI](https://circleci.com/gh/afit/rimworld-save-migrator.svg?style=svg)](https://circleci.com/gh/afit/rimworld-save-migrator)

Please use the [issues tracker](https://github.com/afit/rimworld-save-migrator/issues)
to report any bugs. Pull requests are gratefully received.

The logic for these scripts came from FMKirby's posts on reddit.

When diagnosing issues, using the game's logs is pretty helpful. On macOS, these
aren't generated by default. To log, use a command like this:

```
$ cd ~/Library/Application\ Support/Steam/steamapps/common/RimWorld/RimWorldMac.app/Contents/MacOS
$ ./RimWorldMac -logfile rimworld.log
```
